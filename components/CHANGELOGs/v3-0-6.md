## v3.0.6 â€“ Mobile-First Profile Management: Pinata IPFS Integration & UI Optimization

Short summary
- Migrated from Arweave to Pinata IPFS for decentralized storage, implemented mobile-first profile management with image uploads, enhanced UI/UX with trust-building messaging, and optimized the entire user experience for mobile devices. Fixed critical upload issues and implemented comprehensive error handling.

Bugs fixed
- Resolved "Maximum call stack size exceeded" error in Pinata file uploads caused by inefficient base64 conversion using spread operator with large files
- Fixed "Invalid image URL" errors by switching from pinJSONToIPFS to pinFileToIPFS endpoint for proper image file storage
- Corrected CORS policy issues when accessing private Pinata gateways from localhost by implementing public gateway fallback
- Fixed infinite loop issues in React useEffect hooks causing excessive API calls and console spam
- Resolved JavaScript hoisting errors (ReferenceError: Cannot access before initialization) in component lifecycle management
- Fixed Supabase table schema mismatch by removing non-existent "updated_at" column from upsert operations
- Corrected import/export naming inconsistencies between supabase-client.js and component files
- Resolved production CORS errors by implementing environment-aware gateway selection (production uses public gateway directly)

New implementation features and changes
- Migrated storage architecture from Arweave to Pinata IPFS:
  - Replaced Arweave integration with Pinata IPFS for better performance and reliability
  - Implemented proper file upload using FormData instead of base64 JSON encoding
  - Added chunked base64 conversion to handle large files without stack overflow
  - Created comprehensive Pinata configuration with JWT and Gateway Key authentication
- Enhanced profile management system:
  - Added profile image and cover image fields with file upload capabilities
  - Implemented mobile-optimized file selectors with image preview functionality
  - Added automatic cleanup of old Pinata files when updating profiles
  - Created comprehensive image validation (file type, size limits, error handling)
- Improved user interface and experience:
  - Removed cluttered image URLs from settings page for cleaner mobile display
  - Added dynamic profile image display in GreetingBox component with fallback to default avatar
  - Implemented circular image styling with proper aspect ratio handling
  - Updated color scheme from yellow-400 to amber-500 for better visual consistency
- Enhanced trust and transparency messaging:
  - Updated profile header to remove technical jargon and parentheses
  - Implemented mobile-optimized trust-building description emphasizing encryption and decentralization
  - Added clear messaging about data ownership and platform limitations
  - Emphasized user control and privacy protection
- Optimized mobile experience:
  - Reduced bottom navigation bar height from h-16 to h-12 for better mobile screen utilization
  - Implemented responsive image displays with proper mobile sizing
  - Added mobile-first file upload interface with touch-friendly controls
  - Optimized text content for mobile readability and space efficiency
- Created comprehensive error handling and recovery:
  - Added graceful fallback mechanisms for failed image uploads
  - Implemented proper error boundaries and user feedback
  - Created retry mechanisms for network failures
  - Added detailed logging for debugging and monitoring
- Enhanced Pinata integration:
  - Implemented proper file deletion using unpin API endpoint
  - Added support for both JWT and API key authentication methods
  - Created gateway access control with public fallback for CORS issues
  - Added comprehensive metadata tagging for file organization
- Improved React component architecture:
  - Fixed infinite loop issues with proper useCallback and useEffect dependencies
  - Resolved hoisting errors with correct function declaration order
  - Implemented proper state management for image files and previews
  - Added comprehensive form validation and error handling

Notes
- Profile images are now stored as actual image files on IPFS instead of base64 JSON data
- Users can upload images up to 5MB with automatic validation and error handling
- The system automatically cleans up old files when users update their profiles
- All image uploads include proper metadata for organization and retrieval
- Mobile users can easily select images from their device gallery with instant previews
- The platform emphasizes user data ownership and privacy protection
- CORS issues are handled gracefully with public gateway fallbacks
- Production environments automatically use public Pinata gateway to avoid CORS restrictions
- All components are optimized for mobile-first user experience
- Trust-building messaging clearly communicates data security and decentralization benefits
